<!DOCTYPE html>
<html>
  <head>
    <title>Wordle Clone</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #f0f0f0;
      }
      .title {
        font-size: 36px;
        margin-bottom: 20px;
      }
      .rules {
        font-size: 16px;
        margin-bottom: 20px;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(5, 50px);
        grid-gap: 10px;
      }
      .cell {
        width: 50px;
        height: 50px;
        border: 2px solid black;
        text-transform: uppercase;
        text-align: center;
        font-size: 24px;
        line-height: 50px;
      }
    </style>
  </head>
  <body>
    <div>
      <div class="title">Custom Vocabulary Wordle</div>
      <div class="rules">
        <p><strong>Rules:</strong></p>
        <ul>
          <li>Green: Letter is correct and in the right position.</li>
          <li>Yellow: Letter is correct but in the wrong position.</li>
          <li>Grey: Letter is not in the word.</li>
        </ul>
      </div>
      <div class="rules">
        <p><strong>Instructions:</strong></p>
        <ul>
          <li>Use your keyboard to enter a 5-letter word.</li>
          <li>Press Enter to guess.</li>
          <li>Press Backspace to delete a letter.</li>
        </ul>
      </div>
      <div class="grid"></div>
    </div>
    <script>
      const grid = document.querySelector(".grid");
      let targetWord = "";
      let currentGuess = [];
      let guessCount = 0;

      // Read words from file and set a random target word
      fetch("five-letter-words.txt")
        .then((response) => response.text())
        .then((text) => {
          const words = text.split("\n").filter((word) => word.length === 5);
          targetWord =
            words[Math.floor(Math.random() * words.length)].toUpperCase();
          console.log("Target Word:", targetWord); // For debugging
        });

      for (let i = 0; i < 30; i++) {
        const cell = document.createElement("div");
        cell.classList.add("cell");
        grid.appendChild(cell);
      }

      document.addEventListener("keydown", handleKeyPress);

      function handleKeyPress(e) {
        if (guessCount >= 6) return;

        const letter = e.key.toUpperCase();
        if (letter >= "A" && letter <= "Z" && currentGuess.length < 5) {
          currentGuess.push(letter);
          updateGrid();
        } else if (e.key === "Backspace" && currentGuess.length > 0) {
          currentGuess.pop();
          updateGrid();
        } else if (e.key === "Enter" && currentGuess.length === 5) {
          checkGuess();
          currentGuess = [];
          guessCount++;
          updateGrid();
        }
      }

      function updateGrid() {
        const cells = grid.querySelectorAll(".cell");
        cells.forEach((cell, i) => {
          const row = Math.floor(i / 5);
          const col = i % 5;
          if (row === guessCount) {
            cell.textContent = currentGuess[col] || "";
          }
        });
      }

      function checkGuess() {
        const guess = currentGuess.join("");
        const cells = grid.querySelectorAll(".cell");

        for (let i = 0; i < 5; i++) {
          const cell = cells[guessCount * 5 + i];
          const letter = guess[i];

          if (targetWord[i] === letter) {
            cell.style.backgroundColor = "green";
          } else if (targetWord.includes(letter)) {
            cell.style.backgroundColor = "yellow";
          } else {
            cell.style.backgroundColor = "grey";
          }
        }

        if (guess === targetWord) {
          alert("Congratulations! You guessed the word!");
          document.removeEventListener("keydown", handleKeyPress);
        } else if (guessCount === 5) {
          alert(
            `Sorry, you've run out of guesses. The word was ${targetWord}.`
          );
          document.removeEventListener("keydown", handleKeyPress);
        }
      }
    </script>
  </body>
</html>
